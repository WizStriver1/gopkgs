language: go
sudo: false

go_import_path: github.com/uudashr/gopkgs/v2

go:
  - 1.14
  - 1.13
  - 1.12
  - 1.11
  - 1.10
  - 1.9
  - 1.8
  - tip

env:
  - GO111MODULE: on

matrix:
  allow_failures:
    - go: tip

os:
  - linux
  - osx

install:
  - go mod download || go get -u

before_script:
  - if [[ "$TRAVIS_GO_VERSION" =~ ^1\.8 ]]; then echo 'Skipping golangci-lint install'; else make lint-prepare; fi

script:
  - if [[ "$TRAVIS_GO_VERSION" =~ ^1\.8 ]]; then echo 'Skipping golangci-lint run'; else make lint; fi
  - make test
